%META:TOPICINFO{author="BobMorris" date="1263787732" format="1.1" reprev="1.58" version="1.58"}%
%META:TOPICPARENT{name="WebHome"}%
[[http://plazi.org Plazi]] is a non-profit organization dedicated to advancing open scientific literature. Its main project at the moment is the development of tools for automation of extraction of information from publications, whether scanned or born digital, and web services for applying and providing such information. This page is discusses an effort underway to use SPM to serve species descriptions, and related data from systematics literature. The work is funded by the Encyclopedia of Life and administered by GBIF and carried out for [[http://plazi.org Plazi]] by Main.TerryCatapano and Main.BobMorris. It builds on work originally funded by the U.S. National Science Foundation at the American Museum of Natural History and the University of Massachusetts/Boston.

<strike>This is a complete rewrite and synthesis reflecting our understanding as of Oct 10 2008 and onward. It addresses remarks, answers, and questions made in earlier versions by Main.RogerHyam and Main.PatrickLeary and ourselves, including some simple things we were doing wrong. </strike> As of Jan 22, 2009 and onward, all the issues raised in earlier versions of this page have been addressed and the service described below is complete, subject only to some tuning. The discussion leading to it can be found by examining the history, and is also frozen at PlaziSPMDiscussion. Thanks to Roger and Patrick for their comments.

The actual RDF vocabularies at issue can be found at [[http://rs.tdwg.org/ontology/voc/SpeciesProfileModel.rdf]] and [[http://rs.tdwg.org/ontology/voc/SPMInfoItems.rdf]] 

%TOC%

---+Plazi Report To GBIF and EOL
PlaziFinalReport
---+Plazi SPM REST service
As of 22 January, we offer a REST service requiring the user to choose one of two serializations, described below.  The full api for the REST service follows those descriptions. In all cases, the document is returned as RDF/XML conforming to the definition of SPM. The API described below controls the content and rendering format of the spm:hasContent elements, which is what most clients will be inserting into their applications.

Base URL:

http://plazi.cs.umb.edu/exist/rest/db/taxonx_docs/getSPM.xq

Required Parameters:

   * &doc=[document name] This parameter sets the document to be retrieved as SPM

   * Use one of each pair of following parameters:
      * &description:
         * &description=narrow  This parameter imposes  a narrow view of what consitutes an spmi:Description. It extracts from a publication only the classical description, i.e. the characters and states that describe the taxon under consideration, for insertion into the appropriate spm:hasContent element.
         * &description=broad This parameter imposes a broad view of an spmi:Description. Application of it in the REST service results in all of the sections of a treatment returned, e.g. _materials examined_, _description_, _diagnosis_, _etymology_, etc., separated from one another in ways that identify them. These appear in the appropriate spm:hasContent element. For future work we will propose a controlled vocabulary for these parts of a treatment so that they can be marked up more explicitly in RDF.
      * &render:   
         * &render=text  The spm:hasContent items are plain text, with paragraphs separated by white space.
         * &render=xhtml The spm:hasContent items are xhtml with character entities require escaping.  This rendering will require that a client filters the escaped entities, particularly the xhtml escaped brackets, to turn it into xhtml suitable for browsers.
      * &associations:   
         * &associations=yes  For each taxon name appearing in the treatment of the described taxon an spm:associatedTaxon is created inside an spmi:Associations
         * &associations=no  No information about associated taxa is returned


Other changes

   * added dc:rights with string "Not copyrightable" added to spm:SpeciesProfileModel
   * added an spm:associatedTaxon for each taxon name in the treatment serving as source of each spm:SpeciesProfileModel
   * added xml comments for revision number of xsl stylesheet converting from taxonX to SPM and timestamp for date and time of transformation

---+ Generally Current Example

Click below for an example generated by the current, live SPM server.  Many browsers do not reveal the tags in RDF/XML, so you may have to do "View Source" in your browser to see them.

[[http://plazi.cs.umb.edu/exist/rest/db/taxonx_docs/getSPM.xq?doc=5959_tx.xml&render=xhtml&description=narrow][http://plazi.cs.umb.edu/exist/rest/db/taxonx_docs/getSPM.xq?doc=5959_tx.xml&render=xhtml&description=broad&associations=no]]


Click below to query the service and invoke the w3c RDF validator against the result, showing the rdf triples and graph.

[[http://www.w3.org/RDF/Validator/ARPServlet?URI=http://plazi.cs.umb.edu/exist/rest/db/taxonx_docs/getSPM.xq?doc=5959_tx.xml&render=xhtml&description=broad&associations=no&PARSE=Parse+URI%3A+&TRIPLES_AND_GRAPH=PRINT_BOTH&FORMAT=PNG_EMBED][Click for RDF validation, triples and graph from the W3C online RDF validator]]

The text example below might not be completely up to date. In a comment near the top of it, the RDF will carry the date of its construction and the date and version of the underlying XSLT that produced the SPM RDF. This is current as of the "Generated" date
<verbatim>
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xml:base="">
    <!--Id: tx2spm.xsl 22 2009-01-15 10:16:30Z catapanoth $-->
    <!--Generated: 2009-01-22T23:43:03.035-05:00-->
    <tbase:Actor xmlns:tbase="http://rs.tdwg.org/ontology/Base#" rdf:ID="_actor1">
        <tcom:publishedInCitation xmlns:tcom="http://rs.tdwg.org/ontology/voc/Common#">
            <tcom:publicationCitation rdf:ID="_pubcit">
                <tpcit:authorship xmlns:tpcit="http://rs.tdwg.org/ontology/voc/PublicationCitation#">Donisthorpe, H. S. J. K.</tpcit:authorship>
                <tpcit:title xmlns:tpcit="http://rs.tdwg.org/ontology/voc/PublicationCitation#">A new Camponotus from Madagascar and a small collection of ants from Mauritius.</tpcit:title>
                <tpcit:parentPublicationString xmlns:tpcit="http://rs.tdwg.org/ontology/voc/PublicationCitation#">
                    Annals and Magazine of Natural History
                </tpcit:parentPublicationString>

                <tpcit:volume xmlns:tpcit="http://rs.tdwg.org/ontology/voc/PublicationCitation#">
                        (12)2
                    </tpcit:volume>
                <tpcit:datePublished xmlns:tpcit="http://rs.tdwg.org/ontology/voc/PublicationCitation#">1949</tpcit:datePublished>
                <tpcit:pages xmlns:tpcit="http://rs.tdwg.org/ontology/voc/PublicationCitation#">271-275</tpcit:pages>
            </tcom:publicationCitation>
        </tcom:publishedInCitation>
    </tbase:Actor>

    <spm:SpeciesProfileModel xmlns:spm="http://rs.tdwg.org/ontology/voc/SpeciesProfileModel#" rdf:ID="_spm_1">
        <spm:aboutTaxon>
            <tc:TaxonConcept xmlns:tc="http://rs.tdwg.org/ontology/voc/TaxonConcept#" rdf:about="urn:lsid:biosci.ohio-state.edu:osuc_concepts:135414">
                <tc:nameString xml:lang="en">Camponotus gerberti</tc:nameString>
                <tc:accordingTo rdf:resource="#_actor1"/>
                <tc:hasName>
                    <tn:TaxonName xmlns:tn="http://rs.tdwg.org/ontology/voc/TaxonName#" rdf:ID="_tn1">
                        <tn:rankString xml:lang="en">Species</tn:rankString>

                    </tn:TaxonName>
                </tc:hasName>
            </tc:TaxonConcept>
        </spm:aboutTaxon>
        <spm:hasInformation>
            <spmi:Use xmlns:spmi="http://rs.tdwg.org/ontology/voc/SPMInfoItems#" rdf:ID="_Use_1">
                <dcterms:rights xmlns:dcterms="http://dublincore.org/2008/01/14/dcterms.rdf#">Public domain.</dcterms:rights>
            </spmi:Use>

        </spm:hasInformation>
        <spm:hasInformation>
            <spmi:Description xmlns:spmi="http://rs.tdwg.org/ontology/voc/SPMInfoItems#" rdf:ID="_Description_1">
                <spm:hasContent>
                    <xhtml:p xmlns:xhtml="http://www.w3.org/1999/xhtml">[[ soldier ]]. Very pale dirty yellow, head reddish yellow, mandibles dark red, teeth, scapes, anterior border of clypeus, and extreme anterior angles of cheeks black, clothed with very sparse outstanding longer and shorter yellow hairs and some fine very short decumbent yellow hairs. Sculpture consisting of very fine reticulations, a little stronger on head.</xhtml:p>
                    <xhtml:p xmlns:xhtml="http://www.w3.org/1999/xhtml">Head large, triangular, considerably broader behind than in front, broadest a little before posterior angles, which are rounded and prominent, posterior border excised, slightly sinuate on each side; mandibles massive, strongly punctured and with transverse ridges, masticatory border armed with six large strong teeth, the apical one being the longest, curved and sharp, the next two longer and sharper than the last three; clypeus large, somewhat flat, carinate and slightly convex on disc, anterior border considerably produced in middle where it is somewhat crenulate, and five large punctures are present along the edge, and smaller punctures, rather wide apart, are scattered over the rest of the surface, posterior border excised in middle; frontal area very faintly defined; frontal carinas rather long, raised, with sharp edges, the rims or edges enclosing the antennal sockets are considerably raised and prominent; a very fine narrow longitudinal ridge takes the place of the frontal furrow and extends between the frontal carinae as far back as their extreme edges; eyes large, broad oval, rather flat, are situated rather high up before the middle of the sides of the head; antenna 12 - jointcd, scape long, thickened at apex, extending beyond the posterior border of head funiculus with all the joints elongate, first slightly shorter than the others, last joint long and pointed. Thorax longer than broad, broadest behind centre of sides of pronotum, somewhat slender behind; pronotum ample. convex, with a short neck, sides margined, considerably widened afterneck, posterior border semicircular; sutures between pro- and mesonotum, and meso- and epinotum fine but distinct; mesonotum longer than broad, shorter than pronotum, somewhat flat on disc, sides rather straight, epinotum longer than mesonotum, sides rather straight, angle between dorsal surface and declivity not marked, dorsal surface longer than declivity. Scale of petiole rather thick at base, anterior surface slightly convex, posterior surface slightly concave, upper surface narrow and forming a rather sharp, ridge; gaster oval, not very voluminous, pointed at apex. Legs fairly long; tibiae prismatic. Long. 18 mm.</xhtml:p>
                    <xhtml:p xmlns:xhtml="http://www.w3.org/1999/xhtml">[[ worker ]] Of the same pale colour as the [[ soldier ]]. but only the extreme anterior angle of clypens and cheeks blackish; the mandibles are pale yellow with the teeth red. The sculpture and hairs are similar.</xhtml:p>

                    <xhtml:p xmlns:xhtml="http://www.w3.org/1999/xhtml">Head long, narrow, broader in front than behind, broadest a little in front of sides of head, narrowed, rather sharply behind eyes to base; teeth to mandibles somewhat more slender and sharper, carinae on clypeus a little more pronounced; eyes more prominent. Thorax narrow and slender; pronotum more narrowed to apex. Scale of petiole of similar shape, but a little narrower; gaster and-legs of similar shape. Long. 10 - 12 mm.</xhtml:p>
                </spm:hasContent>
            </spmi:Description>
        </spm:hasInformation>
        <spm:hasInformation>
            <spmi:Associations xmlns:spmi="http://rs.tdwg.org/ontology/voc/SPMInfoItems#" rdf:ID="_Associations_1_1"/>
        </spm:hasInformation>
    </spm:SpeciesProfileModel>

    <spm:SpeciesProfileModel xmlns:spm="http://rs.tdwg.org/ontology/voc/SpeciesProfileModel#" rdf:ID="_spm_2">
        <spm:aboutTaxon>
            <tc:TaxonConcept xmlns:tc="http://rs.tdwg.org/ontology/voc/TaxonConcept#" rdf:about="urn:lsid:biosci.ohio-state.edu:osuc_concepts:143647">
                <tc:nameString xml:lang="en">Dodous bispinosus</tc:nameString>
                <tc:accordingTo rdf:resource="#_actor1"/>
                <tc:hasName>
                    <tn:TaxonName xmlns:tn="http://rs.tdwg.org/ontology/voc/TaxonName#" rdf:ID="_tn2">
                        <tn:rankString xml:lang="en">Species</tn:rankString>

                    </tn:TaxonName>
                </tc:hasName>
            </tc:TaxonConcept>
        </spm:aboutTaxon>
        <spm:hasInformation>
            <spmi:Use xmlns:spmi="http://rs.tdwg.org/ontology/voc/SPMInfoItems#" rdf:ID="_Use_2">
                <dcterms:rights xmlns:dcterms="http://dublincore.org/2008/01/14/dcterms.rdf#">Public domain.</dcterms:rights>
            </spmi:Use>

        </spm:hasInformation>
        <spm:hasInformation>
            <spmi:Description xmlns:spmi="http://rs.tdwg.org/ontology/voc/SPMInfoItems#" rdf:ID="_Description_2">
                <spm:hasContent>
                    <xhtml:p xmlns:xhtml="http://www.w3.org/1999/xhtml">
Very like 
trispinosus
but without the two shorter spines on the mesonotum. The sculpture is different, and the species is also a little darker in colour.
</xhtml:p>
                    <xhtml:p xmlns:xhtml="http://www.w3.org/1999/xhtml">[[ worker ]]. Head: the sculpture is quite different; the disc is smooth and shining, from the outer part of the smooth surface at sides semicircular carinae run on each side along the cheeks, and from the posterior part a few weaker carinae extend towards base of head, the space between these and the posterior border of head being smooth and shining.</xhtml:p>
                    <xhtml:p xmlns:xhtml="http://www.w3.org/1999/xhtml">Thorax: the ridges on the pronotum are considerably less marked; the mesonotum is smooth and shining and there are no spines present. The ridges on the sides of the thorax are less marked; the dorsal surface and the declivity of the epinotum are smooth and shining.</xhtml:p>

                    <xhtml:p xmlns:xhtml="http://www.w3.org/1999/xhtml">The spines on the pronotum are slightly longer and stronger, and those of the epinotum, being of a different shape, being slightly shorter, and projecting outwards then inwards in an even curve. Long. 5 mm.</xhtml:p>
                </spm:hasContent>
            </spmi:Description>
        </spm:hasInformation>
        <spm:hasInformation>
            <spmi:Associations xmlns:spmi="http://rs.tdwg.org/ontology/voc/SPMInfoItems#" rdf:ID="_Associations_2_1">
                <spm:associatedTaxon>
                    <tc:TaxonConcept xmlns:tc="http://rs.tdwg.org/ontology/voc/TaxonConcept#" rdf:about="urn:lsid:biosci.ohio-state.edu:osuc_concepts:143662">

                        <tc:nameString xml:lang="en">Dodous&#160;trispinosus</tc:nameString>
                        <tc:hasRelationship>
                            <tc:toTaxon rdf:ID="target_taxa_1">
                                <tc:TaxonConcept rdf:resource=""/>
                            </tc:toTaxon>
                        </tc:hasRelationship>
                    </tc:TaxonConcept>
                </spm:associatedTaxon>

            </spmi:Associations>
        </spm:hasInformation>
    </spm:SpeciesProfileModel>
    <spm:SpeciesProfileModel xmlns:spm="http://rs.tdwg.org/ontology/voc/SpeciesProfileModel#" rdf:ID="_spm_3">
        <spm:aboutTaxon>
            <tc:TaxonConcept xmlns:tc="http://rs.tdwg.org/ontology/voc/TaxonConcept#" rdf:about="urn:lsid:biosci.ohio-state.edu:osuc_concepts:36839">
                <tc:nameString xml:lang="en">Technomyrmex primroseae</tc:nameString>
                <tc:accordingTo rdf:resource="#_actor1"/>

                <tc:hasName>
                    <tn:TaxonName xmlns:tn="http://rs.tdwg.org/ontology/voc/TaxonName#" rdf:ID="_tn3">
                        <tn:rankString xml:lang="en">Species</tn:rankString>
                    </tn:TaxonName>
                </tc:hasName>
            </tc:TaxonConcept>
        </spm:aboutTaxon>
        <spm:hasInformation>

            <spmi:Use xmlns:spmi="http://rs.tdwg.org/ontology/voc/SPMInfoItems#" rdf:ID="_Use_3">
                <dcterms:rights xmlns:dcterms="http://dublincore.org/2008/01/14/dcterms.rdf#">Public domain.</dcterms:rights>
            </spmi:Use>
        </spm:hasInformation>
        <spm:hasInformation>
            <spmi:Description xmlns:spmi="http://rs.tdwg.org/ontology/voc/SPMInfoItems#" rdf:ID="_Description_3">
                <spm:hasContent>
                    <xhtml:p xmlns:xhtml="http://www.w3.org/1999/xhtml">[[ worker ]]. Black, rather shining, mandibles, antennae and legs dirty pale yellow, the petiole brighter yellow. Sculpture: head and gaster finely reticulate, thorax more distinctly so, clothed with fine golden pubescence, which is more pronounced on gaster and a few short outstanding hairs, more being present on gaster.</xhtml:p>

                    <xhtml:p xmlns:xhtml="http://www.w3.org/1999/xhtml">Head oval, somewhat narrower in front than behind, broadest a little behind eyes, posterior angles rounded,. posterior border excised in middle; mandibles moderately long, triangular apical tooth sharp and curved, masticatory border armed with a number of small sharp teeth, the second and fourth being longer than the third; clypeus fairly large, anterior border excised in middle, posterior border extending in a point between the frontal carinae; frontal area small but distinct; frontal carinae short, low, fairly wide apart, parallel; eyes large, round, rather prominent, situated in front of sides of head; antennal 12 - jointed, scape long, extending beyond posterior border of head, funiculus with first joint longer than third, second joint the shortest, rest of joints gradually increasing in length and breadth, last joint as long as the two preceding taken together. Thorax with a neck, longer than broad, constricted in middle, broadest at humeral angles; pronotum large, transverse, convex, anterior border margined, posterior border semicircular encircling mesonotum; mesonotum shorter and narrower than pronotum, a little longer than broad, slightly convex; sutures between pro- and mesonotum and meso- and epinotum well marked, especially the latter; epinotum with angle between dorsal surface and declivity well marked, declivity abrupt, somewhat flat, considerably longer than dorsal surface. Petiole narrow, flat, slightly longer than broad, scale entirely rudimentary; gaster oval, overhanging the petiole, pointed at apex, fifth segment extending a little beyond the fourth, cloacial opening terminal. Long. 2.5 mm.</xhtml:p>
                </spm:hasContent>
            </spmi:Description>
        </spm:hasInformation>
        <spm:hasInformation>
            <spmi:Associations xmlns:spmi="http://rs.tdwg.org/ontology/voc/SPMInfoItems#" rdf:ID="_Associations_3_1"/>
        </spm:hasInformation>
    </spm:SpeciesProfileModel>

</rdf:RDF>
</verbatim>

Edit above this line please

%SEARCH{"%TOPIC%" excludetopic="%TOPIC%" header="---+Linking Topics" format="   * $topic" nosearch="on" nototal="on" }%

%META:FILEATTACHMENT{name="plazi_spm_9_24_08.xml" attachment="plazi_spm_9_24_08.xml" attr="" comment="Example of 24 September 2008" date="1222784807" path="plazi_spm_9_24_08.xml" size="12121" stream="plazi_spm_9_24_08.xml" user="Main.PatrickLeary" version="1"}%
%META:FILEATTACHMENT{name="plazi_spm_10_20_08.xml" attachment="plazi_spm_10_20_08.xml" attr="" comment="Example of 20 October 2008" date="1224508523" path="plazi_spm_10_20_08.xml" size="10101" stream="plazi_spm_10_20_08.xml" user="Main.PatrickLeary" version="1"}%
