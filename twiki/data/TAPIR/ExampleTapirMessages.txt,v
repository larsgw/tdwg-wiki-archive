head	1.36;
access;
symbols;
locks; strict;
comment	@# @;


1.36
date	2008.12.22.18.14.58;	author RenatoDeGiovanni;	state Exp;
branches;
next	1.35;

1.35
date	2007.02.23.16.26.48;	author RicardoPereira;	state Exp;
branches;
next	1.34;

1.34
date	2007.01.10.12.50.29;	author RicardoPereira;	state Exp;
branches;
next	1.33;

1.33
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.32;

1.32
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.31;

1.31
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.30;

1.30
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.29;

1.29
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.28;

1.28
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.27;

1.27
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.26;

1.26
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.25;

1.25
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.24;

1.24
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.23;

1.23
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.22;

1.22
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.21;

1.21
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.20;

1.20
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.19;

1.19
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.18;

1.18
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.17;

1.17
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.16;

1.16
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.15;

1.15
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.14;

1.14
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.13;

1.13
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.12;

1.12
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.11;

1.11
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.10;

1.10
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.9;

1.9
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.8;

1.8
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.7;

1.7
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.6;

1.6
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.5;

1.5
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.4;

1.4
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.3;

1.3
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.2;

1.2
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	1.1;

1.1
date	2007.01.09.00.00.00;	author MoinMoin;	state Exp;
branches;
next	;


desc
@Initial revision
@


1.36
log
@none
@
text
@%META:TOPICINFO{author="RenatoDeGiovanni" date="1229969698" format="1.1" reprev="1.36" version="1.36"}%
This section provides some examples of common TAPIR messages.
The latest version of the examples can always be found in the subversion repository. This page is only updated once in a while, so it might be that the examples below are not valid against the latest schema. But they will only vary in minor details.

http://ww2.biocase.org/svn/tapir/trunk/protocol/examples/

Messages in TAPIR should be sent through HTTP.
Every TAPIR message can be sent as an XML encoded document as defined by the TAPIR schema or alternatively through a list of URL [[GetInvokedOperations][parameters]] specified by TAPIR as well.

This allows to invoke all TAPIR operations through HTTP GET (using the [[GetInvokedOperations][parameters]]) or trough HTTP POST (using [[GetInvokedOperations][parameters]] or sending an XML document).

Here we provide a parameterized version of every example and the corresponding XML version. They MUST generate the same result from a TAPIR compliant service. The parameterized version is represented with an*unencoded* URL string.
----
---+++ TAPIR Operations
   * [[#p][Ping]]
      * [[#preq][request]]
      * [[#presp][response]]
   * [[#c][Capabilities]]
      * [[#creq][request]]
      * [[#cresp][response]]
   * [[#m][Metadata]]
      * [[#mreq][request]]
      * [[#mresp][response]]
   * [[#i][Inventory]]
      * [[#it][inventory template]]
      * [[#ireq][request]]
      * [[#iresp][response]]
   * [[#s][Search]]
      * [[#om][output model]]
      * [[#st][search template]]
      * [[#sreq][request]]
      * [[#sresp][response]]

----
<a name="p"></a>
---++ Ping operation

*HTTP Parameters*

   * http://wrapper_end_point?op=ping

<a name="preq"></a>
*XML message*
<verbatim>
<?xml version="1.0" encoding="UTF-8"?>
<request xmlns="http://rs.tdwg.org/tapir/1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://rs.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
    <header>
        <source accesspoint="http://url_from_client" sendtime="2005-11-11T12:23:56.023+01:00">
            <software name="TAPIR_Implementation" version="1.0"/>
        </source>
        <destination>http://accesspoint_url</destination>
    </header>
    <ping/>
</request>
</verbatim>

<a name="presp"></a>
*Response*
<verbatim>
<?xml version="1.0" encoding="UTF-8"?>
<response xmlns="http://rs.tdwg.org/tapir/1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://rs.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
    <header>
        <source accesspoint="http://accesspoint_url" sendtime="2005-11-11T12:23:57.023+01:00"></source>
    </header>
    <pong/>
</response>
</verbatim>
----
<a name="m"></a>
---++ Metadata operation

*HTTP Parameters*

   * http://wrapper_end_point?op=metadata

<a name="mreq"></a>
*XML message*
<verbatim>
<?xml version="1.0" encoding="UTF-8"?>
<request xmlns="http://rs.tdwg.org/tapir/1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://rs.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
    <header>
        <source accesspoint="http://url_from_client" sendtime="2005-11-11T12:23:56.023+01:00">
        </source>
    </header>
    <metadata/>
</request>
</verbatim>

<a name="mresp"></a>
*Response*
<verbatim>
<?xml version='1.0' encoding='utf-8'?>
<metadata xmlns='http://rs.tdwg.org/tapir/1.0' xmlns:dc='http://purl.org/dc/elements/1.1/' xmlns:dct='http://purl.org/dc/terms/' xmlns:geo='http://www.w3.org/2003/01/geo/wgs84_pos#' xmlns:vcard='http://www.w3.org/2001/vcard-rdf/3.0#'>
  <dc:title>BioCASe training</dc:title>
  <dc:type>http://purl.org/dc/dcmitype/Service</dc:type>
  <accesspoint>http://localhost:8080/tapir/pywrapper/training</accesspoint>
  <dc:description>This testing database is used in BioCASE workshops and other events.
    This database was gratefully provide by the Herbarium at the Universidad of Barcelona CeDocBiv, 
    but the data has been greatly modified so DO NOT CONSIDER IT AS REAL DATA
  </dc:description>
  <dc:language>en-us</dc:language>
  <dc:subject>BioCASe, Barcelona, CeDocBiv, herbarium, plantae, specimen</dc:subject>
  <dct:bibliographicCitation>The BioCASE training database</dct:bibliographicCitation>
  <dc:rights>You can distribute this database freely but only for testing purposes and training.</dc:rights>
  <dct:modified>2005-03-17</dct:modified>
  <indexingPreferences frequency='P14D' maxDuration='PT3H' startTime='02:00:00Z'/>
  <relatedEntity>
    <role>data supplier</role>
    <role>data supplier</role>
    <entity>
      <identifier>http://ww3.bgbm.org/biocase/datasources/training/metadata.xml</identifier>
      <name>Botanic Garden &amp; Botanical Museum Berlin-Dahlem</name>
      <acronym>BGBM</acronym>
      <logoURL>http://www.biocase.org/images/bdi_logo.gif</logoURL>
      <description>The Botanic Garden Berlin-Dahlem comprises an area of 126 acres and hence is one of the world´s largest and most important gardens. About 22,000 different species of plants are cultivated here. In the 39 acres of the plant-geography section - one of the biggest of its kind in the world - you can travel all the way around the Northern Hemisphere, and in the 42 acre Arboretum and taxonomy section you can get an insight into the relationship among woody and herbaceous plants. The greenhouse complex consists of 16 houses open to the public and offers the possibility to travel through tropical and subtropical vegetation. These living collections, along with the preserved collections, form the basis for the continued expansion of scientific study within the plant kingdom, with the goal to deepen the knowledge necessary for the utilization and protection of plant diversity on earth.</description>
      <address>Königin-Luise-Straße 6-8, D-14191 Berlin, Germany</address>
      <relatedInformation>http://www.bgbm.org/</relatedInformation>
      <hasContact>
        <role>technical</role>
        <vcard:VCARD>
          <vcard:FN>Frank Sinatra</vcard:FN>
          <vcard:TITLE>senior developer</vcard:TITLE>
          <vcard:TEL>+49 30-5555-55</vcard:TEL>
          <vcard:EMAIL>frank@@worldstars.org</vcard:EMAIL>
        </vcard:VCARD>
      </hasContact>
      <hasContact>
        <role>administrative</role>
        <vcard:VCARD>
          <vcard:FN>Frankenstein</vcard:FN>
          <vcard:TITLE>head of biodiversity department</vcard:TITLE>
          <vcard:TEL>+49 30-5555-56</vcard:TEL>
          <vcard:EMAIL>fstein@@worldstars.org</vcard:EMAIL>
        </vcard:VCARD>
      </hasContact>
      <geo:Point>
        <geo:lat>52.458356</geo:lat>
        <geo:long>13.305017</geo:long>
      </geo:Point>
    </entity>
  </relatedEntity>
</metadata>
</verbatim>
----
<a name="c"></a>
---++ Capabilities operation

*HTTP Parameters*

   * http://wrapper_end_point?op=capabilities

<a name="creq"></a>
*XML message*
<verbatim>
<?xml version="1.0" encoding="UTF-8"?>
<request xmlns="http://rs.tdwg.org/tapir/1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://rs.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
    <header>
        <source accesspoint="http://url_from_client" sendtime="2005-11-11T12:23:56.023+01:00">
        </source>
    </header>
        <capabilities/>
</request>
</verbatim>

<a name="cresp"></a>
*Response*
<verbatim>
<?xml version="1.0" encoding="UTF-8"?>
<response xmlns="http://rs.tdwg.org/tapir/1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://rs.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
    <header>
        <source accesspoint="http://accesspoint_url" sendtime="2005-11-11T12:23:56.023+01:00">
            <software name="TAPIR_Implementation" version="1.0"/>
        </source>
    </header>
    <capabilities>
        <operations>
            <ping/>
            <metadata/>
            <capabilities/>
            <view>
                <queryTemplates>
                    <queryTemplate location="http://url_to_searchtemplateA"/>
                    <queryTemplate location="http://url_to_searchtemplateB"/>
                    <queryTemplate location="http://url_to_inventorytemplate"/>
                </queryTemplates>
            </view>
            <inventory/>
            <search>
                <staticOutputModels>
                    <outputModel location="http://url_to_raw_outputmodelA"/>
                    <outputModel location="http://url_to_raw_outputmodelB"/>
                </staticOutputModels>
            </search>
        </operations>
        <filter>
            <encoding>
                <expression>
                    <concept/>
                    <literal2/>
                    <parameter/>
                    <variable/>
                    <arithmetic>
                        <add/>
                        <sub/>
                    </arithmetic>
                </expression>
                <booleanOperators>
                    <logical>
                        <not/>
                        <and/>
                        <or/>
                    </logical>
                    <comparative>
                        <equals/>
                        <greaterThan/>
                        <greaterThanOrEquals/>
                        <lessThan/>
                        <lessThanOrEquals/>
                        <in/>
                        <isNull/>
                        <like/>
                    </comparative>
                </booleanOperators>
            </encoding>
        </filter>
        <concepts>
            <conceptNameServers>
                <server location="http://url_to_primary_concept_server"/>
                <server location="http://url_to_secondary_concept_server"/>
            </conceptNameServers>
            <schema namespace="http://www.tdwg.org/schemas/abcd/1.2"
                location="http://www.bgbm.org/TDWG/CODATA/Schema/ABCD-1.20.xsd">
                <mappedConcept
                    id="/DataSets/DataSet/DatasetDerivations/DatasetDerivation/DateSupplied"
                    searchable="true"/>
                <mappedConcept
                    id="/DataSets/DataSet/DatasetDerivations/DatasetDerivation/Description"
                    searchable="true"/>
            </schema>
            <schema namespace="http://digir.net/schema/conceptual/darwin/extension/curatorial/1.0"
                location="http://digir.net/schema/conceptual/darwin/extension/curatorial/1.0/curatorialWithDiGIRv1.3.xsd">
                <mappedConcept id="/CatalogNumberNumeric" searchable="true" mandatory="true"/>
                <mappedConcept id="/IdentifiedBy" searchable="true"/>
            </schema>
        </concepts>

        <variables>
            <environment>
                <timestamp/>
                <lastUpdate/>
                <date/>
                <datasourceName/>
                <accessPoint/>
            </environment>
        </variables>
        
        <settings>
            <minQueryTermLength>2</minQueryTermLength>
            <maxElementRepetitions>10</maxElementRepetitions>
            <maxElementLevels>20</maxElementLevels>
            <maxResponseTags>500</maxResponseTags>
            <maxResponseSize>500</maxResponseSize>
        </settings>
        
    </capabilities>
</response>
</verbatim>


----
<a name="i"></a>
---++ Inventory operation

*HTTP Parameters*

   * Without aliases
   * http://wrapper_end_point?op=inventory&start=10&limit=10&concept=http://digir.net/schema/conceptual/darwin/2003/1.0#/Country&concept=http://digir.net/schema/conceptual/darwin/2003/1.0#/Genus
   * With global concept aliases
   * http://wrapper_end_point?op=inventory&start=10&limit=10&concept=Country@@dwc&concept=Genus@@dwc
   * With template
   * http://wrapper_end_point?op=inventory&start=10&limit=10&template=http://you.net/inventory3.xml&name=Inula*

<a name="it"></a>
*Inventory template*
An inventory template can be referred to in a request and allows simple parameter bindings to a more complex operation. Example template:
<verbatim>
<?xml version="1.0" encoding="UTF-8"?>
<inventoryTemplate xmlns="http://rs.tdwg.org/tapir/1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://rs.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
    <label>Specimen Names</label>
    <documentation>Search and list unique scientific names of specimen identifications ordered
        alphabetically by their name. The filter parameter "name" is used to build the filter</documentation>
    <concepts>
        <concept id="dwc:/ScientificName"/>
    </concepts>
    <filter>
        <like>
            <concept id="dwc:/ScientificName"/>
            <parameter name="name"/>
        </like>
    </filter>
</inventoryTemplate>
</verbatim>

<a name="ireq"></a>
*XML message*
In the XML messages aliases could also be used, but we only shows here the example with complete concept IDs
<verbatim>
<?xml version="1.0" encoding="UTF-8"?>
<request xmlns="http://rs.tdwg.org/tapir/1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://rs.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
    <header>
        <source accesspoint="http://url_from_client" sendtime="2005-11-11T12:23:56.023+01:00">
        </source>
    </header>
    <inventory count="false" limit="100" start="0">
        <concepts>
            <concept id="http://digir.net/schema/conceptual/darwin/2003/1.0#/Country"/>
            <concept id="http://digir.net/schema/conceptual/darwin/2003/1.0#/Genus"/>
        </concepts>
    </inventory>
</request>
</verbatim>

<a name="iresp"></a>
*Response*
<verbatim>
<?xml version="1.0" encoding="UTF-8"?>
<response xmlns="http://rs.tdwg.org/tapir/1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://rs.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
    <header>
        <source accesspoint="http://accesspoint_url" sendtime="2005-11-11T12:23:56.023+01:00">
            <software name="TAPIR_Implementation" version="1.0"/>
        </source>
    </header>
    <inventory>
        <concepts>
            <concept id="http://digir.net/schema/conceptual/darwin/2003/1.0#/Country"/>
            <concept id="http://digir.net/schema/conceptual/darwin/2003/1.0#/Genus"/>
        </concepts>
        <record>
            <value>AUSTRALIA</value>
            <value>Calicium</value>
        </record>
        <record>
            <value>AUSTRALIA</value>
            <value>Fellhanera</value>
        </record>
        <summary start="1" totalReturned="2" totalMatched="15" next="3"/>
    </inventory>
</response>
</verbatim>

----
<a name="s"></a>
---++ Search operation
Search operations make use of [[#om][output models]].

*HTTP Parameters*
   * Without aliases
   * http://wrapper_end_point?op=search&start=0&limit=10&model=http://res.tdwg.org/tapir/models/abcd206.xml&filter=http://www.tdwg.org/schemas/abcd/2.06/DataSets/DataSet/Units/Unit/Identifications/Identification/Result/TaxonIdentified/ScientificName/FullScientificNameString like "Luzu*"&orderby=http://www.tdwg.org/schemas/abcd/2.06/DataSets/DataSet/Units/Unit/Identifications/Identification/Result/TaxonIdentified/ScientificName/FullScientificNameString
   * With global concept aliases
   * http://wrapper_end_point?op=search&start=0&limit=10&model=http://res.tdwg.org/tapir/models/abcd206.xml&filter=FullScientificName@@abcd206 like "Luzu*"&orderby=FullScientificName@@abcd206
   * With template
   * http://wrapper_end_point?op=search&start=0&limit=10&template=http://you.net/search3.xml&name=Luzu*

<a name="om"></a>
*Output Model*
<verbatim>
<?xml version="1.0" encoding="UTF-8"?>
<outputModel xmlns="http://rs.tdwg.org/tapir/1.0"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://rs.tdwg.org/tapir/1.0
        http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd
        http://www.w3.org/2001/XMLSchema
        http://www.w3.org/2001/XMLSchema.xsd">
    <structure>
        <xs:schema targetNamespace="http://example.net/simple_specimen">
            <xs:element name="dataset">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element name="specimen" minOccurs="0" maxOccurs="unbounded">
                            <xs:complexType>
                                <xs:sequence>
                                    <xs:element name="identification" maxOccurs="unbounded"
                                        minOccurs="0">
                                        <xs:complexType>
                                            <xs:sequence>
                                                <xs:element name="name">
                                                    <xs:complexType>
                                                        <xs:simpleContent>
                                                            <xs:extension base="xs:string">
                                                                <xs:attribute name="family"
                                                                    type="xs:string"/>
                                                            </xs:extension>
                                                        </xs:simpleContent>
                                                    </xs:complexType>
                                                </xs:element>
                                                <xs:element name="identifier" type="xs:string"
                                                    minOccurs="0"/>
                                            </xs:sequence>
                                            <xs:attribute name="date" type="xs:string"
                                                use="optional"/>
                                        </xs:complexType>
                                    </xs:element>
                                </xs:sequence>
                                <xs:attribute name="catnum" type="xs:int" use="required"/>
                            </xs:complexType>
                        </xs:element>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:schema>
    </structure>
    <indexingElement path="/dataset/specimen"/>
    <mapping>
        <node path="/dataset/specimen@@catnum">
            <concept id="dwc:/CatalogNumber"/>
        </node>
        <node path="/dataset/specimen/identification/name">
            <concept id="dwc:/ScientificName"/>
        </node>
        <node path="/dataset/specimen/identification/name@@family">
            <concept id="dwc:/Family"/>
        </node>
        <node path="/dataset/specimen/identification/identifier">
            <concept  id="abcd:/DataSets/DataSet/Units/Unit/Identifications/Identification/Identifier/IdentifierPersonName/PersonName"/>
        </node>
        <node path="/dataset/specimen/identification@@date">
            <concept  id="abcd:/DataSets/DataSet/Units/Unit/Identifications/Identification/IdentificationDate/DateText"/>
        </node>
    </mapping>
</outputModel>
</verbatim>

<a name="st"></a>
*Search template*
A search template can be referred to in a request and allows simple parameter bindings to a more complex operation. Example template:
<verbatim>
<?xml version="1.0" encoding="UTF-8"?>
<searchTemplate xmlns="http://rs.tdwg.org/tapir/1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://rs.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
    <label>Specimen by Name</label>
    <documentation>Search specimens by their scientific name. Result is returned ordered by name and
        catalogue number. The filter parameter "name" is used to build the filter.</documentation>
    <outputModel location="http://the.same.host/output_model1.xml"/>
    <filter>
        <like>
            <concept id="dwc:/ScientificName"/>
            <parameter name="name"/>
        </like>
    </filter>
    <orderBy>
        <concept id="dwc:/ScientificName"/>
        <concept id="dwc:/CatalogNumber"/>
    </orderBy>
</searchTemplate>
</verbatim>

<a name="sreq"></a>
*XML message*
<verbatim>
<?xml version="1.0" encoding="UTF-8"?>
<request xmlns="http://rs.tdwg.org/tapir/1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://rs.tdwg.org/tapir/1.0
    file:/Users/javi/workspace/tapirProtocol/protocol/tapir.xsd">
    <header>
        <source accesspoint="http://url_from_client" sendtime="2005-11-11T12:23:56.023+01:00"/>
    </header>
    <search start="0" limit="10">
        <outputModel
            location="http://ww2.biocase.org/svn/tapir/trunk/protocol/examples/output_model1.xml"/>
        <filter>
            <like>
                <concept id="dwc:/ScientificName"/>
                <literal2 value="Luzu*"/>
            </like>
        </filter>
        <orderBy>
            <concept id="dwc:/Family"/>
            <concept id="dwc:/ScientificName"/>
        </orderBy>
    </search>
</request>
</verbatim>

<a name="sresp"></a>
*Response*

<verbatim>
<?xml version="1.0" encoding="UTF-8"?>
<response xmlns="http://rs.tdwg.org/tapir/1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://rs.tdwg.org/tapir/1.0
    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
    <header>
        <source accesspoint="http://url_from_client" sendtime="2005-11-11T12:23:56.023+01:00"/>
    </header>
    <search>
        <dataset xmlns="http://example.net/simple_specimen"
            xsi:schemaLocation="http://example.net/simple_specimen
            http://ww2.biocase.org/svn/tapir/trunk/protocol/examples/schema_used_in_output_model.xsd">
            <specimen catnum="234">
                <identification>
                    <name>Luzula luzuloides</name>
                </identification>
            </specimen>
            <specimen catnum="290">
                <identification>
                    <name>Luzula alpestris</name>
                </identification>
            </specimen>
        </dataset>
        <summary start="0" totalReturned="2"/>
    </search>
</response>
</verbatim>

@


1.35
log
@none
@
text
@d1 1
a1 1
%META:TOPICINFO{author="RicardoPereira" date="1172248008" format="1.1" version="1.35"}%
@


1.34
log
@none
@
text
@d1 1
a1 1
%META:TOPICINFO{author="RicardoPereira" date="1168433429" format="1.1" version="1.34"}%
d370 1
a370 1
Search operations make use of [[#o][output models]].
@


1.33
log
@Revision 33
@
text
@d1 534
a534 532
This section provides some examples of common TAPIR messages.
The latest version of the examples can always be found in the subversion repository. This page is only updated once in a while, so it might be that the examples below are not valid against the latest schema. But they will only vary in minor details.

http://ww2.biocase.org/svn/tapir/trunk/protocol/examples/

Messages in TAPIR should be sent through HTTP.
Every TAPIR message can be sent as an XML encoded document as defined by the TAPIR schema or alternatively through a list of URL [[GetInvokedOperations][parameters]] specified by TAPIR as well.

This allows to invoke all TAPIR operations through HTTP GET (using the [[GetInvokedOperations][parameters]]) or trough HTTP POST (using [[GetInvokedOperations][parameters]] or sending an XML document).

Here we provide a parameterized version of every example and the corresponding XML version. They MUST generate the same result from a TAPIR compliant service. The parameterized version is represented with an*unencoded* URL string.
----
---+++ TAPIR Operations
   * [[#p][Ping]]
      * [[#preq][request]]
      * [[#presp][response]]
   * [[#c][Capabilities]]
      * [[#creq][request]]
      * [[#cresp][response]]
   * [[#m][Metadata]]
      * [[#mreq][request]]
      * [[#mresp][response]]
   * [[#i][Inventory]]
      * [[#it][inventory template]]
      * [[#ireq][request]]
      * [[#iresp][response]]
   * [[#s][Search]]
      * [[#om][output model]]
      * [[#st][search template]]
      * [[#sreq][request]]
      * [[#sresp][response]]

----
<a name="p"></a>
---++ Ping operation

*HTTP Parameters*

   * http://wrapper_end_point?op=ping

<a name="preq"></a>
*XML message*
<verbatim>
<?xml version="1.0" encoding="UTF-8"?>
<request xmlns="http://rs.tdwg.org/tapir/1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://rs.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
    <header>
        <source accesspoint="http://url_from_client" sendtime="2005-11-11T12:23:56.023+01:00">
            <software name="TAPIR_Implementation" version="1.0"/>
        </source>
        <destination>http://accesspoint_url</destination>
    </header>
    <ping/>
</request>
</verbatim>

<a name="presp"></a>
*Response*
<verbatim>
<?xml version="1.0" encoding="UTF-8"?>
<response xmlns="http://rs.tdwg.org/tapir/1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://rs.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
    <header>
        <source accesspoint="http://accesspoint_url" sendtime="2005-11-11T12:23:57.023+01:00"></source>
    </header>
    <pong/>
</response>
</verbatim>
----
<a name="m"></a>
---++ Metadata operation

*HTTP Parameters*

   * http://wrapper_end_point?op=metadata

<a name="mreq"></a>
*XML message*
<verbatim>
<?xml version="1.0" encoding="UTF-8"?>
<request xmlns="http://rs.tdwg.org/tapir/1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://rs.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
    <header>
        <source accesspoint="http://url_from_client" sendtime="2005-11-11T12:23:56.023+01:00">
        </source>
    </header>
    <metadata/>
</request>
</verbatim>

<a name="mresp"></a>
*Response*
<verbatim>
<?xml version='1.0' encoding='utf-8'?>
<metadata xmlns='http://rs.tdwg.org/tapir/1.0' xmlns:dc='http://purl.org/dc/elements/1.1/' xmlns:dct='http://purl.org/dc/terms/' xmlns:geo='http://www.w3.org/2003/01/geo/wgs84_pos#' xmlns:vcard='http://www.w3.org/2001/vcard-rdf/3.0#'>
  <dc:title>BioCASe training</dc:title>
  <dc:type>http://purl.org/dc/dcmitype/Service</dc:type>
  <accesspoint>http://localhost:8080/tapir/pywrapper/training</accesspoint>
  <dc:description>This testing database is used in BioCASE workshops and other events.
    This database was gratefully provide by the Herbarium at the Universidad of Barcelona CeDocBiv, 
    but the data has been greatly modified so DO NOT CONSIDER IT AS REAL DATA
  </dc:description>
  <dc:language>en-us</dc:language>
  <dc:subject>BioCASe, Barcelona, CeDocBiv, herbarium, plantae, specimen</dc:subject>
  <dct:bibliographicCitation>The BioCASE training database</dct:bibliographicCitation>
  <dc:rights>You can distribute this database freely but only for testing purposes and training.</dc:rights>
  <dct:modified>2005-03-17</dct:modified>
  <indexingPreferences frequency='P14D' maxDuration='PT3H' startTime='02:00:00Z'/>
  <relatedEntity>
    <role>data supplier</role>
    <role>data supplier</role>
    <entity>
      <identifier>http://ww3.bgbm.org/biocase/datasources/training/metadata.xml</identifier>
      <name>Botanic Garden &amp; Botanical Museum Berlin-Dahlem</name>
      <acronym>BGBM</acronym>
      <logoURL>http://www.biocase.org/images/bdi_logo.gif</logoURL>
      <description>The Botanic Garden Berlin-Dahlem comprises an area of 126 acres and hence is one of the world´s largest and most important gardens. About 22,000 different species of plants are cultivated here. In the 39 acres of the plant-geography section - one of the biggest of its kind in the world - you can travel all the way around the Northern Hemisphere, and in the 42 acre Arboretum and taxonomy section you can get an insight into the relationship among woody and herbaceous plants. The greenhouse complex consists of 16 houses open to the public and offers the possibility to travel through tropical and subtropical vegetation. These living collections, along with the preserved collections, form the basis for the continued expansion of scientific study within the plant kingdom, with the goal to deepen the knowledge necessary for the utilization and protection of plant diversity on earth.</description>
      <address>Königin-Luise-Straße 6-8, D-14191 Berlin, Germany</address>
      <relatedInformation>http://www.bgbm.org/</relatedInformation>
      <hasContact>
        <role>technical</role>
        <vcard:VCARD>
          <vcard:FN>Frank Sinatra</vcard:FN>
          <vcard:TITLE>senior developer</vcard:TITLE>
          <vcard:TEL>+49 30-5555-55</vcard:TEL>
          <vcard:EMAIL>frank@@worldstars.org</vcard:EMAIL>
        </vcard:VCARD>
      </hasContact>
      <hasContact>
        <role>administrative</role>
        <vcard:VCARD>
          <vcard:FN>Frankenstein</vcard:FN>
          <vcard:TITLE>head of biodiversity department</vcard:TITLE>
          <vcard:TEL>+49 30-5555-56</vcard:TEL>
          <vcard:EMAIL>fstein@@worldstars.org</vcard:EMAIL>
        </vcard:VCARD>
      </hasContact>
      <geo:Point>
        <geo:lat>52.458356</geo:lat>
        <geo:long>13.305017</geo:long>
      </geo:Point>
    </entity>
  </relatedEntity>
</metadata>
</verbatim>
----
<a name="c"></a>
---++ Capabilities operation

*HTTP Parameters*

   * http://wrapper_end_point?op=capabilities

<a name="creq"></a>
*XML message*
<verbatim>
<?xml version="1.0" encoding="UTF-8"?>
<request xmlns="http://rs.tdwg.org/tapir/1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://rs.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
    <header>
        <source accesspoint="http://url_from_client" sendtime="2005-11-11T12:23:56.023+01:00">
        </source>
    </header>
        <capabilities/>
</request>
</verbatim>

<a name="cresp"></a>
*Response*
<verbatim>
<?xml version="1.0" encoding="UTF-8"?>
<response xmlns="http://rs.tdwg.org/tapir/1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://rs.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
    <header>
        <source accesspoint="http://accesspoint_url" sendtime="2005-11-11T12:23:56.023+01:00">
            <software name="TAPIR_Implementation" version="1.0"/>
        </source>
    </header>
    <capabilities>
        <operations>
            <ping/>
            <metadata/>
            <capabilities/>
            <view>
                <queryTemplates>
                    <queryTemplate location="http://url_to_searchtemplateA"/>
                    <queryTemplate location="http://url_to_searchtemplateB"/>
                    <queryTemplate location="http://url_to_inventorytemplate"/>
                </queryTemplates>
            </view>
            <inventory/>
            <search>
                <staticOutputModels>
                    <outputModel location="http://url_to_raw_outputmodelA"/>
                    <outputModel location="http://url_to_raw_outputmodelB"/>
                </staticOutputModels>
            </search>
        </operations>
        <filter>
            <encoding>
                <expression>
                    <concept/>
                    <literal_/>
                    <parameter/>
                    <variable/>
                    <arithmetic>
                        <add/>
                        <sub/>
                    </arithmetic>
                </expression>
                <booleanOperators>
                    <logical>
                        <not/>
                        <and/>
                        <or/>
                    </logical>
                    <comparative>
                        <equals/>
                        <greaterThan/>
                        <greaterThanOrEquals/>
                        <lessThan/>
                        <lessThanOrEquals/>
                        <in/>
                        <isNull/>
                        <like/>
                    </comparative>
                </booleanOperators>
            </encoding>
        </filter>
        <concepts>
            <conceptNameServers>
                <server location="http://url_to_primary_concept_server"/>
                <server location="http://url_to_secondary_concept_server"/>
            </conceptNameServers>
            <schema namespace="http://www.tdwg.org/schemas/abcd/1.2"
                location="http://www.bgbm.org/TDWG/CODATA/Schema/ABCD-1.20.xsd">
                <mappedConcept
                    id="/DataSets/DataSet/DatasetDerivations/DatasetDerivation/DateSupplied"
                    searchable="true"/>
                <mappedConcept
                    id="/DataSets/DataSet/DatasetDerivations/DatasetDerivation/Description"
                    searchable="true"/>
            </schema>
            <schema namespace="http://digir.net/schema/conceptual/darwin/extension/curatorial/1.0"
                location="http://digir.net/schema/conceptual/darwin/extension/curatorial/1.0/curatorialWithDiGIRv1.3.xsd">
                <mappedConcept id="/CatalogNumberNumeric" searchable="true" mandatory="true"/>
                <mappedConcept id="/IdentifiedBy" searchable="true"/>
            </schema>
        </concepts>

        <variables>
            <environment>
                <timestamp/>
                <lastUpdate/>
                <date/>
                <datasourceName/>
                <accessPoint/>
            </environment>
        </variables>
        
        <settings>
            <minQueryTermLength>2</minQueryTermLength>
            <maxElementRepetitions>10</maxElementRepetitions>
            <maxElementLevels>20</maxElementLevels>
            <maxResponseTags>500</maxResponseTags>
            <maxResponseSize>500</maxResponseSize>
        </settings>
        
    </capabilities>
</response>
</verbatim>


----
<a name="i"></a>
---++ Inventory operation

*HTTP Parameters*

   * Without aliases
   * http://wrapper_end_point?op=inventory&start=10&limit=10&concept=http://digir.net/schema/conceptual/darwin/2003/1.0#/Country&concept=http://digir.net/schema/conceptual/darwin/2003/1.0#/Genus
   * With global concept aliases
   * http://wrapper_end_point?op=inventory&start=10&limit=10&concept=Country@@dwc&concept=Genus@@dwc
   * With template
   * http://wrapper_end_point?op=inventory&start=10&limit=10&template=http://you.net/inventory3.xml&name=Inula*

<a name="it"></a>
*Inventory template*
An inventory template can be referred to in a request and allows simple parameter bindings to a more complex operation. Example template:
<verbatim>
<?xml version="1.0" encoding="UTF-8"?>
<inventoryTemplate xmlns="http://rs.tdwg.org/tapir/1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://rs.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
    <label>Specimen Names</label>
    <documentation>Search and list unique scientific names of specimen identifications ordered
        alphabetically by their name. The filter parameter "name" is used to build the filter</documentation>
    <concepts>
        <concept id="dwc:/ScientificName"/>
    </concepts>
    <filter>
        <like>
            <concept id="dwc:/ScientificName"/>
            <parameter name="name"/>
        </like>
    </filter>
</inventoryTemplate>
</verbatim>

<a name="ireq"></a>
*XML message*
In the XML messages aliases could also be used, but we only shows here the example with complete concept IDs
<verbatim>
<?xml version="1.0" encoding="UTF-8"?>
<request xmlns="http://rs.tdwg.org/tapir/1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://rs.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
    <header>
        <source accesspoint="http://url_from_client" sendtime="2005-11-11T12:23:56.023+01:00">
        </source>
    </header>
    <inventory count="false" limit="100" start="0">
        <concepts>
            <concept id="http://digir.net/schema/conceptual/darwin/2003/1.0#/Country"/>
            <concept id="http://digir.net/schema/conceptual/darwin/2003/1.0#/Genus"/>
        </concepts>
    </inventory>
</request>
</verbatim>

<a name="iresp"></a>
*Response*
<verbatim>
<?xml version="1.0" encoding="UTF-8"?>
<response xmlns="http://rs.tdwg.org/tapir/1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://rs.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
    <header>
        <source accesspoint="http://accesspoint_url" sendtime="2005-11-11T12:23:56.023+01:00">
            <software name="TAPIR_Implementation" version="1.0"/>
        </source>
    </header>
    <inventory>
        <concepts>
            <concept id="http://digir.net/schema/conceptual/darwin/2003/1.0#/Country"/>
            <concept id="http://digir.net/schema/conceptual/darwin/2003/1.0#/Genus"/>
        </concepts>
        <record>
            <value>AUSTRALIA</value>
            <value>Calicium</value>
        </record>
        <record>
            <value>AUSTRALIA</value>
            <value>Fellhanera</value>
        </record>
        <summary start="1" totalReturned="2" totalMatched="15" next="3"/>
    </inventory>
</response>
</verbatim>

----
<a name="s"></a>
---++ Search operation
Search operations make use of [[#o][output models]].

*HTTP Parameters*
   * Without aliases
   * http://wrapper_end_point?op=search&start=0&limit=10&model=http://res.tdwg.org/tapir/models/abcd206.xml&filter=http://www.tdwg.org/schemas/abcd/2.06/DataSets/DataSet/Units/Unit/Identifications/Identification/Result/TaxonIdentified/ScientificName/FullScientificNameString like "Luzu*"&orderby=http://www.tdwg.org/schemas/abcd/2.06/DataSets/DataSet/Units/Unit/Identifications/Identification/Result/TaxonIdentified/ScientificName/FullScientificNameString
   * With global concept aliases
   * http://wrapper_end_point?op=search&start=0&limit=10&model=http://res.tdwg.org/tapir/models/abcd206.xml&filter=FullScientificName@@abcd206 like "Luzu*"&orderby=FullScientificName@@abcd206
   * With template
   * http://wrapper_end_point?op=search&start=0&limit=10&template=http://you.net/search3.xml&name=Luzu*

<a name="om"></a>
*Output Model*
<verbatim>
<?xml version="1.0" encoding="UTF-8"?>
<outputModel xmlns="http://rs.tdwg.org/tapir/1.0"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://rs.tdwg.org/tapir/1.0
        http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd
        http://www.w3.org/2001/XMLSchema
        http://www.w3.org/2001/XMLSchema.xsd">
    <structure>
        <xs:schema targetNamespace="http://example.net/simple_specimen">
            <xs:element name="dataset">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element name="specimen" minOccurs="0" maxOccurs="unbounded">
                            <xs:complexType>
                                <xs:sequence>
                                    <xs:element name="identification" maxOccurs="unbounded"
                                        minOccurs="0">
                                        <xs:complexType>
                                            <xs:sequence>
                                                <xs:element name="name">
                                                    <xs:complexType>
                                                        <xs:simpleContent>
                                                            <xs:extension base="xs:string">
                                                                <xs:attribute name="family"
                                                                    type="xs:string"/>
                                                            </xs:extension>
                                                        </xs:simpleContent>
                                                    </xs:complexType>
                                                </xs:element>
                                                <xs:element name="identifier" type="xs:string"
                                                    minOccurs="0"/>
                                            </xs:sequence>
                                            <xs:attribute name="date" type="xs:string"
                                                use="optional"/>
                                        </xs:complexType>
                                    </xs:element>
                                </xs:sequence>
                                <xs:attribute name="catnum" type="xs:int" use="required"/>
                            </xs:complexType>
                        </xs:element>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:schema>
    </structure>
    <indexingElement path="/dataset/specimen"/>
    <mapping>
        <node path="/dataset/specimen@@catnum">
            <concept id="dwc:/CatalogNumber"/>
        </node>
        <node path="/dataset/specimen/identification/name">
            <concept id="dwc:/ScientificName"/>
        </node>
        <node path="/dataset/specimen/identification/name@@family">
            <concept id="dwc:/Family"/>
        </node>
        <node path="/dataset/specimen/identification/identifier">
            <concept  id="abcd:/DataSets/DataSet/Units/Unit/Identifications/Identification/Identifier/IdentifierPersonName/PersonName"/>
        </node>
        <node path="/dataset/specimen/identification@@date">
            <concept  id="abcd:/DataSets/DataSet/Units/Unit/Identifications/Identification/IdentificationDate/DateText"/>
        </node>
    </mapping>
</outputModel>
</verbatim>

<a name="st"></a>
*Search template*
A search template can be referred to in a request and allows simple parameter bindings to a more complex operation. Example template:
<verbatim>
<?xml version="1.0" encoding="UTF-8"?>
<searchTemplate xmlns="http://rs.tdwg.org/tapir/1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://rs.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
    <label>Specimen by Name</label>
    <documentation>Search specimens by their scientific name. Result is returned ordered by name and
        catalogue number. The filter parameter "name" is used to build the filter.</documentation>
    <outputModel location="http://the.same.host/output_model1.xml"/>
    <filter>
        <like>
            <concept id="dwc:/ScientificName"/>
            <parameter name="name"/>
        </like>
    </filter>
    <orderBy>
        <concept id="dwc:/ScientificName"/>
        <concept id="dwc:/CatalogNumber"/>
    </orderBy>
</searchTemplate>
</verbatim>

<a name="sreq"></a>
*XML message*
<verbatim>
<?xml version="1.0" encoding="UTF-8"?>
<request xmlns="http://rs.tdwg.org/tapir/1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://rs.tdwg.org/tapir/1.0
    file:/Users/javi/workspace/tapirProtocol/protocol/tapir.xsd">
    <header>
        <source accesspoint="http://url_from_client" sendtime="2005-11-11T12:23:56.023+01:00"/>
    </header>
    <search start="0" limit="10">
        <outputModel
            location="http://ww2.biocase.org/svn/tapir/trunk/protocol/examples/output_model1.xml"/>
        <filter>
            <like>
                <concept id="dwc:/ScientificName"/>
                <literal value="Luzu*"/>
            </like>
        </filter>
        <orderBy>
            <concept id="dwc:/Family"/>
            <concept id="dwc:/ScientificName"/>
        </orderBy>
    </search>
</request>
</verbatim>

<a name="sresp"></a>
*Response*

<verbatim>
<?xml version="1.0" encoding="UTF-8"?>
<response xmlns="http://rs.tdwg.org/tapir/1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://rs.tdwg.org/tapir/1.0
    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
    <header>
        <source accesspoint="http://url_from_client" sendtime="2005-11-11T12:23:56.023+01:00"/>
    </header>
    <search>
        <dataset xmlns="http://example.net/simple_specimen"
            xsi:schemaLocation="http://example.net/simple_specimen
            http://ww2.biocase.org/svn/tapir/trunk/protocol/examples/schema_used_in_output_model.xsd">
            <specimen catnum="234">
                <identification>
                    <name>Luzula luzuloides</name>
                </identification>
            </specimen>
            <specimen catnum="290">
                <identification>
                    <name>Luzula alpestris</name>
                </identification>
            </specimen>
        </dataset>
        <summary start="0" totalReturned="2"/>
    </search>
</response>
</verbatim>
@


1.32
log
@Revision 32
@
text
@d373 1
a373 1
   * http://wrapper_end_point?op=search&start=0&limit=10&model=http://res.tdwg.org/tapir/models/abcd206.xml&filter=http://www.tdwg.org/schemas/abcd/2.06/DataSets/DataSet/Units/Unit/Identifications/Identification/Result/TaxonIdentified/ScientificName/FullScientificNameString like "Abies*"&orderby=http://www.tdwg.org/schemas/abcd/2.06/DataSets/DataSet/Units/Unit/Identifications/Identification/Result/TaxonIdentified/ScientificName/FullScientificNameString
d375 1
a375 1
   * http://wrapper_end_point?op=search&start=0&limit=10&model=http://res.tdwg.org/tapir/models/abcd206.xml&filter=FullScientificName@@abcd206 like "Abies*"&orderby=FullScientificName@@abcd206
@


1.31
log
@Revision 31
@
text
@d372 4
@


1.30
log
@Revision 30
@
text
@d198 1
a198 1
                <predefinedOutputModels>
d201 1
a201 2
                </predefinedOutputModels>
                <customOutputModels accepted="false"/>
d237 2
a238 2
                <primary location="http://url_to_primary_concept_server"/>
                <secondary location="http://url_to_secondary_concept_server"/>
@


1.29
log
@Revision 29
@
text
@d97 51
a147 32
<?xml version="1.0" encoding="UTF-8"?>
<response xmlns="http://rs.tdwg.org/tapir/1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://rs.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
    <header>
        <source accesspoint="http://accesspoint_url" sendtime="2005-11-11T12:23:56.023+01:00">
            <software name="TAPIR_Implementation" version="1.0"/>
        </source>
    </header>
    <metadata>
        <label>Australian Fruit Flies</label>
        <accesspoint>http://www.flies.au/pywrapper/flies</accesspoint>
        <geoLocation lat="52.497806" long="13.438339"/>
        <abstract>Australian fruit flies collection of georeferenced records observations</abstract>
        <keywords>fuit flies observation australia diptera Tephritidae</keywords>
        <citation>Australian Fruit Flies</citation>
        <rights>free</rights>
        <lastUpdated>2006-01-01T00:00:00</lastUpdated>
        <indexingPreferences startTime="09:30:00Z" maxDuration="PT1H" frequency="P1M" ExampleTapirMessages>
        <relatedEntities>
            <entity>
                <name>TAPIR working group</name>
                <contact>
                    <name>Frank Sinatra</name>
                    <email>f.sinatra@@tapir.com</email>
                    <role>system administrator</role>
                </contact>
                <role>Hosting Provider</role>
            </entity>
        </relatedEntities>
    </metadata>
</response>
@


1.28
log
@Revision 28
@
text
@d7 1
a7 1
Every TAPIR message can be send as an XML encoded document as defined by the TAPIR schema or alternatively through a list of [[GetInvokedOperations][parameters]] specified by TAPIR as well.
d9 1
a9 1
That allows to invoke all TAPIR operations through HTTP GET (using the [[GetInvokedOperations][parameters]]) or trough HTTP POST (using [[GetInvokedOperations][parameters]] or sending an XML document).
@


1.27
log
@Revision 27
@
text
@d45 1
a45 1
<request xmlns="http://res.tdwg.org/tapir/1.0"
d47 1
a47 1
    xsi:schemaLocation="http://res.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
d62 1
a62 1
<response xmlns="http://res.tdwg.org/tapir/1.0"
d64 1
a64 1
    xsi:schemaLocation="http://res.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
d83 1
a83 1
<request xmlns="http://res.tdwg.org/tapir/1.0"
d85 1
a85 1
    xsi:schemaLocation="http://res.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
d98 1
a98 1
<response xmlns="http://res.tdwg.org/tapir/1.0"
d100 1
a100 1
    xsi:schemaLocation="http://res.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
d142 1
a142 1
<request xmlns="http://res.tdwg.org/tapir/1.0"
d144 1
a144 1
    xsi:schemaLocation="http://res.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
d157 1
a157 1
<response xmlns="http://res.tdwg.org/tapir/1.0"
d159 1
a159 1
    xsi:schemaLocation="http://res.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
d279 1
a279 1
<inventoryTemplate xmlns="http://res.tdwg.org/tapir/1.0"
d281 1
a281 1
    xsi:schemaLocation="http://res.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
d302 1
a302 1
<request xmlns="http://res.tdwg.org/tapir/1.0"
d304 1
a304 1
    xsi:schemaLocation="http://res.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
d322 1
a322 1
<response xmlns="http://res.tdwg.org/tapir/1.0"
d324 1
a324 1
    xsi:schemaLocation="http://res.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
d361 1
a361 1
<outputModel xmlns="http://res.tdwg.org/tapir/1.0"
d365 1
a365 1
        http://res.tdwg.org/tapir/1.0
d433 1
a433 1
<searchTemplate xmlns="http://res.tdwg.org/tapir/1.0"
d435 1
a435 1
    xsi:schemaLocation="http://res.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
d457 2
a458 2
<request xmlns="http://res.tdwg.org/tapir/1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://res.tdwg.org/tapir/1.0
d485 1
a485 1
<response xmlns="http://res.tdwg.org/tapir/1.0"
d487 1
a487 1
    xsi:schemaLocation="http://res.tdwg.org/tapir/1.0
@


1.26
log
@Revision 26
@
text
@d115 1
a115 5
        <indexingPreferences>
            <startTime>09:30:00Z</startTime>
            <maxDuration>PT1H</maxDuration>
            <frequency>P1M</frequency>
        </indexingPreferences>
@


1.25
log
@Revision 25
@
text
@d107 13
a119 2
        <label>Example Data Provider</label>
        <accesspoint>http://accesspoint_url</accesspoint>
@


1.24
log
@Revision 24
@
text
@a346 4

   * With global concept aliases
   * http://wrapper_end_point?op=inventory&start=10&limit=10&concept=Country@@dwc&concept=Genus@@dwc

d348 1
a348 1
   * http://wrapper_end_point?op=inventory&start=10&limit=10&template=http://you.net/inventory3.xml&name=Inula*
d456 1
a456 1
    <search>
@


1.23
log
@Revision 23
@
text
@d360 6
a365 5
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="
          http://res.tdwg.org/tapir/1.0    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd
            http://www.w3.org/2001/XMLSchema    http://www.w3.org/2001/XMLSchema.xsd
     ">
@


1.22
log
@Revision 22
@
text
@d356 67
@


1.21
log
@Revision 21
@
text
@d15 2
a16 2
      * [[#][preq request]]
      * [[#][presp response]]
d18 2
a19 2
      * [[#][creq request]]
      * [[#][cresp response]]
d21 2
a22 2
      * [[#][mreq request]]
      * [[#][mresp response]]
d24 3
a26 3
      * [[#][it inventory template]]
      * [[#][ireq request]]
      * [[#][iresp response]]
d28 5
a32 4
      * [[#][om output model]]
      * [[#][st search template]]
      * [[#][sreq request]]
      * [[#][sresp response]]
@


1.20
log
@Revision 20
@
text
@d15 2
d18 2
d21 2
d24 3
d28 4
d40 1
d57 1
a58 1

d78 1
d93 1
a94 1

d130 1
d145 1
a146 1

d251 2
d265 2
d289 1
d310 1
a311 1

d339 1
d343 1
d347 33
a379 1
   * http://wrapper_end_point?op=search&start=10&limit=10&model=&template=&filter
d381 1
d408 1
@


1.19
log
@Revision 19
@
text
@d13 1
a13 1
TAPIR Operations:
@


1.18
log
@Revision 18
@
text
@a11 1

d13 8
d57 1
d108 1
d236 1
d319 1
@


1.17
log
@Revision 17
@
text
@d317 22
a338 1

d344 26
a369 1

@


1.16
log
@Revision 16
@
text
@d9 1
a9 1
That allows to invoke all TAPIR operations through HTTP GET (using the parameters) or trough HTTP POST (using parameters or sending an XML document).
@


1.15
log
@Revision 15
@
text
@d2 3
@


1.14
log
@Revision 14
@
text
@d4 1
a4 1
Every TAPIR message can be send as an XML encoded document as defined by the TAPIR schema or alternatively through a list of parameters specified by TAPIR as well.
d232 2
a233 2
   * With templates
   * TBD
@


1.13
log
@Revision 13
@
text
@d106 1
a106 1
<request xmlns="http://www.tdwg.org/schemas/tapir/datasource/1.0"
d108 1
a108 1
    xsi:schemaLocation="http://www.tdwg.org/schemas/tapir/datasource/1.0 http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
d113 1
a113 1
    <capabilities/>
d121 1
a121 1
<response xmlns="http://www.tdwg.org/schemas/tapir/datasource/1.0"
d123 1
a123 2
    xsi:schemaLocation="http://www.tdwg.org/schemas/tapir/datasource/1.0
    http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
d134 1
a134 1
            <search>
d136 3
a138 1
                    <queryTemplate location="http://url_to_querytemplate"/>
d140 7
a147 11
                <variables>
                    <environment>
                        <lastUpdate/>
                        <timestamp/>
                        <datasourceName/>
                        <date/>
                        <metadata/>
                        <accessPoint/>
                        <custom/>
                    </environment>
                </variables>
d150 31
a180 34
        <operators>
            <expression>
                <concept/>
                <literal_/>
                <parameter/>
                <variable/>
                <arithmetic>
                    <div/>
                    <mul/>
                    <add/>
                    <custom/>
                </arithmetic>
            </expression>
            <boolean>
                <logical>
                    <or/>
                    <not/>
                    <custom/>
                    <and/>
                    <custom/>
                </logical>
                <comparative>
                    <like/>
                    <lessThanOrEquals/>
                    <lessThan/>
                    <isNull/>
                    <in/>
                    <greaterThanOrEquals/>
                    <greaterThan/>
                    <equals/>
                    <custom/>
                </comparative>
            </boolean>
        </operators>
d183 2
a184 2
                <primaryConceptNameServer location="http://url_to_primary_concept_server"/>
                <secondaryConceptNameServer location="http://url_to_secondary_concept_server"/>
d186 8
a193 3
            <schema namespace="http://www.tdwg.org/schemas/abcd/1.2" location="http://www.bgbm.org/TDWG/CODATA/Schema/ABCD-1.20.xsd">
                <mappedConcept id="/DataSets/DataSet/DatasetDerivations/DatasetDerivation/DateSupplied" searchable="true"/>
                <mappedConcept id="/DataSets/DataSet/DatasetDerivations/DatasetDerivation/Description" searchable="true"/>
d195 3
a197 2
            <schema namespace="http://digir.net/schema/conceptual/darwin/extension/curatorial/1.0" location="http://digir.net/schema/conceptual/darwin/extension/curatorial/1.0/curatorialWithDiGIRv1.3.xsd">
                <mappedConcept id="/CatalogNumberNumeric" searchable="true"/>
d201 19
a219 1
        <settings/>
a221 1

d232 23
d260 1
a260 1
<request xmlns="http://www.tdwg.org/schemas/tapir/datasource/1.0"
d262 1
a262 1
    xsi:schemaLocation="http://www.tdwg.org/schemas/tapir/datasource/1.0 http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
d267 1
a267 1
    <inventory count="false" limit="10" start="10">
d280 1
a280 1
<response xmlns="http://www.tdwg.org/schemas/tapir/datasource/1.0"
d282 1
a282 1
    xsi:schemaLocation="http://www.tdwg.org/schemas/tapir/datasource/1.0 http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
@


1.12
log
@Revision 12
@
text
@d20 1
a20 1
<request xmlns="http://www.tdwg.org/schemas/tapir/datasource/1.0"
d22 1
a22 1
    xsi:schemaLocation="http://www.tdwg.org/schemas/tapir/datasource/1.0 http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
d29 1
a29 1
    <ping></ping>
d37 1
a37 1
<response xmlns="http://www.tdwg.org/schemas/tapir/datasource/1.0"
d39 1
a39 1
    xsi:schemaLocation="http://www.tdwg.org/schemas/tapir/datasource/1.0 http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
d56 1
a56 1
<request xmlns="http://www.tdwg.org/schemas/tapir/datasource/1.0"
d58 1
a58 1
    xsi:schemaLocation="http://www.tdwg.org/schemas/tapir/datasource/1.0 http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
d71 1
a71 1
<response xmlns="http://www.tdwg.org/schemas/tapir/datasource/1.0"
d73 1
a73 1
    xsi:schemaLocation="http://www.tdwg.org/schemas/tapir/datasource/1.0 http://ww2.biocase.org/svn/tapir/trunk/protocol/tapir.xsd">
@


1.11
log
@Revision 11
@
text
@d3 4
a6 1
Every message in TAPIR can be sent through HTTP using parameters or using a single parameter with an XML document on it. That makes possible to invoke all TAPIR operations through HTTP GET (using the parameters way) or trough HTTP POST (using parameters or sending an XML document).
@


1.10
log
@Revision 10
@
text
@d3 1
a3 1
Every message in TAPIR can be sent trough HTTP using parameters or using a single parameter with an XML document on it. That makes possible to invoke all TAPIR operation trough HTTP GET (using the parameters way) or trough HTTP POST (using parameters or sending an XML document).
d5 1
a5 1
In this document we provide a parameterize version of every example and the XML version. They MUST generate the same results from a TAPIR compliant service. The parameterize version is represented in a URL string NOT ENCODED!.
@


1.9
log
@Revision 9
@
text
@d102 10
a111 1

d117 84
d214 1
d267 1
a267 1
   * http://wrapper_end_point?op=ping
@


1.8
log
@Revision 8
@
text
@d7 1
d93 92
@


1.7
log
@Revision 7
@
text
@a32 3
<!-- 
TAPIR Ping Response example.
-->
d42 50
@


1.6
log
@Revision 6
@
text
@d11 1
a11 1
      * http://wrapper_end_point?op=ping
d28 17
@


1.5
log
@Revision 5
@
text
@d10 2
a11 1
http://wrapper_end_point?op=ping
a15 4
<!-- 
TAPIR Ping Request example.
The most simple operation in TAPIR.
-->
@


1.4
log
@Revision 4
@
text
@d7 1
a7 1
---+++ Ping operation
d10 1
d13 18
@


1.3
log
@Revision 3
@
text
@d9 1
a9 1
*Parameters*
d11 1
a11 1
*XML*
@


1.2
log
@Revision 2
@
text
@d5 1
a5 1
In this document we provide a parameterize version of every example and the XML version. They MUST generate the same results from a TAPIR compliant service. The parameterize version is represented in a URL form NOT encoded.
d8 4
@


1.1
log
@Initial revision
@
text
@d1 7
a7 1
Describe ExampleTapirMessages here.
@
